@if (filedata) { @if (metadata) {
<div id="metadata-card">
  <p-card header="Meta Data">
    <ng-container>
      <p-table [value]="metadata">
        <ng-template #body let-item>
          <tr>
            <td class="metadata-key">{{ "name" | uppercase }}</td>
            <td>{{ metadata[0].name }}</td>
          </tr>
          <tr>
            <td class="metadata-key">{{ "size" | uppercase }}</td>
            <td>{{ metadata[0].size }}</td>
          </tr>
          <tr>
            <td class="metadata-key">{{ "type" | uppercase }}</td>
            <td>{{ metadata[0].type }}</td>
          </tr>
          <tr>
            <td class="metadata-key">{{ "num_variables" | uppercase }}</td>
            <td>{{ metadata[0].num_of_variables }}</td>
          </tr>
          <tr></tr>
        </ng-template>
      </p-table>
    </ng-container>
  </p-card>
</div>
}

<div style="display: grid; grid-template-columns: 1fr 1fr">
  <div>
    <p-card header="Feature Data" [style]="{ margin: '0 2rem' }">
      <p-select
        [options]="features"
        [(ngModel)]="selectedFeature"
        placeholder="Select a Feature"
        [style]="{ margin: '1rem 0' }"
        (onChange)="updateFeatureData()"
      >
      </p-select>
      <p-table [value]="featureDataKeys">
        <ng-template #body let-item let-rowIndex="rowIndex">
          <tr>
            <td class="featuredata-key">{{ item | uppercase }}</td>
            <td>{{ featureDataValues[rowIndex] }}</td>
          </tr>
        </ng-template>
      </p-table>
    </p-card>
  </div>

  <div style="display: flex; flex-direction: column">
    <div>
      <p-card *ngIf="allChartsData.length" [style]="{ margin: '0 2rem' }">
        <p-accordion>
          <p-accordion-panel value="0">
            <p-accordion-header>Unique Values</p-accordion-header>
            <p-accordion-content>
              <p-chart
                *ngIf="chartData.labels.length <= 5; else barChart"
                type="pie"
                [data]="chartData"
                [options]="chartOptions"
                height="10rem"
              ></p-chart>
              <ng-template #barChart>
                <p-chart
                  type="bar"
                  [data]="chartData"
                  [options]="chartOptions"
                />
              </ng-template>
              <!-- <ng-template #tooMany></ng-template> -->
            </p-accordion-content>
          </p-accordion-panel>
          <p-accordion-panel value="1">
            <p-accordion-header>Missing Values</p-accordion-header>
            <p-accordion-content>
              <p-chart
                type="pie"
                [data]="missingChartData"
                [options]="chartOptions"
                height="10rem"
              ></p-chart>
            </p-accordion-content>
          </p-accordion-panel>
        </p-accordion>
      </p-card>
    </div>
    <div *ngIf="corrMatrix.length > 0" style="margin: 2rem">
      <p-card>
        <p-table
          [value]="corrMatrixFeatures"
          [scrollable]="true"
          scrollHeight="400px"
        >
          <ng-template pTemplate="header">
            <tr>
              <th></th>
              <th *ngFor="let colFeature of corrMatrixFeatures">
                {{ colFeature }}
              </th>
            </tr>
          </ng-template>

          <ng-template pTemplate="body" let-rowFeature let-rowIndex="rowIndex">
            <tr>
              <th>{{ rowFeature }}</th>
              <td
                *ngFor="
                  let colFeature of corrMatrixFeatures;
                  let colIndex = index
                "
              >
                {{ corrMatrix[rowIndex][colIndex] | number : "1.2-2" }}
              </td>
            </tr>
          </ng-template>
        </p-table>
      </p-card>
    </div>
  </div>
</div>
}
